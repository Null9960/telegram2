# -*- coding: utf-8 -*-
"""Untitled0.ipynb

Automatically generated by Colab.

Original file is located at
    https://colab.research.google.com/drive/1QxYxdNyFk5CNhBSl6hHvrgDzl28MXWTv
"""

# ØªØ«Ø¨ÙŠØª Ø§Ù„Ù…ÙƒØªØ¨Ø§Øª Ø§Ù„Ù„Ø§Ø²Ù…Ø©
!pip install fastapi uvicorn requests nest_asyncio

from fastapi import FastAPI, Request
import requests
import nest_asyncio
import uvicorn

# ØªÙØ¹ÙŠÙ„ FastAPI ÙÙŠ Google Colab
nest_asyncio.apply()

app = FastAPI()

# Ø¹Ù†ÙˆØ§Ù† Webhook ÙÙŠ ChatGPT Ù„Ø§Ø³ØªÙ‚Ø¨Ø§Ù„ Ø§Ù„Ù†ØªØ§Ø¦Ø¬ Ø¨Ø¹Ø¯ Ø§Ù„ØªÙ†ÙÙŠØ°
CHATGPT_WEBHOOK_URL = "https://your-chatgpt-webhook.com/process"

@app.post("/execute_code")
async def execute_code(request: Request):
    data = await request.json()
    code = data.get("code")

    try:
        # ØªÙ†ÙÙŠØ° Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„Ø¨Ø±Ù…Ø¬ÙŠ Ø¯Ø§Ø®Ù„ Colab
        exec_locals = {}
        exec(code, {}, exec_locals)
        result = exec_locals.get("result", "ØªÙ… ØªÙ†ÙÙŠØ° Ø§Ù„ÙƒÙˆØ¯ Ø¨Ù†Ø¬Ø§Ø­!")

        # Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ù†ØªÙŠØ¬Ø© Ø¥Ù„Ù‰ ChatGPT
        requests.post(CHATGPT_WEBHOOK_URL, json={"response": result})

        return {"status": "success", "result": result}

    except Exception as e:
        return {"status": "error", "message": str(e)}

# ØªØ´ØºÙŠÙ„ Ø§Ù„Ø®Ø§Ø¯Ù… Ø¯Ø§Ø®Ù„ Google Colab
uvicorn.run(app, host="0.0.0.0", port=8000)

!pip install pyngrok

from pyngrok import ngrok

# ÙØªØ­ Ù†ÙÙ‚ Ø¹Ù„Ù‰ Ø§Ù„Ù…Ù†ÙØ° 8000 (Ø­ÙŠØ« ÙŠØ¹Ù…Ù„ FastAPI)
public_url = ngrok.connect(8000)
print("ğŸ”— Ø±Ø§Ø¨Ø· API Ø§Ù„Ø¹Ø§Ù…:", public_url)

ngrok authtoken DFFJ3B5YGUKOT5QA5KU64QTO2DPBCS2I

ngrok config add-authtoken 2u6BsGxIfgQPbF5wtOEO3aJEPf1_3DqKPAi4ZPnxuHkRSs2Sj

agent:
	authtoken: 2u6BsGxIfgQPbF5wtOEO3aJEPf1_3DqKPAi4ZPnxuHkRSs2Sj

!ngrok authtoken "2u6BsGxIfgQPbF5wtOEO3aJEPf1_3DqKPAi4ZPnxuHkRSs2Sj"

from pyngrok import ngrok

# ØªØ´ØºÙŠÙ„ Ngrok Ø¹Ù„Ù‰ Ø§Ù„Ù…Ù†ÙØ° 8000 (Ø­ÙŠØ« ÙŠØ¹Ù…Ù„ FastAPI)
public_url = ngrok.connect(8000)
print("ğŸ”— Ø±Ø§Ø¨Ø· API Ø§Ù„Ø¹Ø§Ù…:", public_url)

# ØªØ«Ø¨ÙŠØª Ø§Ù„Ù…ÙƒØªØ¨Ø§Øª Ø¥Ø°Ø§ Ù„Ù… ØªÙƒÙ† Ù…Ø«Ø¨ØªØ©
!pip install fastapi uvicorn nest_asyncio pyngrok

from fastapi import FastAPI, Request
import uvicorn
import nest_asyncio

# ØªÙØ¹ÙŠÙ„ Ø§Ù„ØªØ´ØºÙŠÙ„ Ø§Ù„Ù…ØªØ²Ø§Ù…Ù†
nest_asyncio.apply()

app = FastAPI()

@app.get("/")
def read_root():
    return {"message": "FastAPI ÙŠØ¹Ù…Ù„ Ø¨Ù†Ø¬Ø§Ø­ Ø¯Ø§Ø®Ù„ Google Colab!"}

@app.post("/execute_code")
async def execute_code(request: Request):
    data = await request.json()
    code = data.get("code")

    try:
        exec_locals = {}
        exec(code, {}, exec_locals)
        result = exec_locals.get("result", "ØªÙ… ØªÙ†ÙÙŠØ° Ø§Ù„ÙƒÙˆØ¯ Ø¨Ù†Ø¬Ø§Ø­!")

        return {"status": "success", "result": result}

    except Exception as e:
        return {"status": "error", "message": str(e)}

# ØªØ´ØºÙŠÙ„ Ø§Ù„Ø®Ø§Ø¯Ù… Ø¹Ù„Ù‰ Ø§Ù„Ù…Ù†ÙØ° 8000 Ø¯Ø§Ø®Ù„ Google Colab
uvicorn.run(app, host="0.0.0.0", port=8000)

from pyngrok import ngrok

# ÙØªØ­ Ù†ÙÙ‚ Ø¹Ù„Ù‰ Ø§Ù„Ù…Ù†ÙØ° 8000
public_url = ngrok.connect(8000)
print("ğŸ”— Ø±Ø§Ø¨Ø· API Ø§Ù„Ø¹Ø§Ù…:", public_url)

!kill -9 $(lsof -t -i:8000)

# ØªØ«Ø¨ÙŠØª Ø§Ù„Ù…ÙƒØªØ¨Ø§Øª Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©
!pip install fastapi uvicorn nest_asyncio pyngrok

from fastapi import FastAPI, Request
import uvicorn
import nest_asyncio
from pyngrok import ngrok

# ØªÙØ¹ÙŠÙ„ Ø§Ù„ØªØ´ØºÙŠÙ„ Ø§Ù„Ù…ØªØ²Ø§Ù…Ù†
nest_asyncio.apply()

# Ø¥Ù†Ø´Ø§Ø¡ ØªØ·Ø¨ÙŠÙ‚ FastAPI
app = FastAPI()

@app.get("/")
def read_root():
    return {"message": "ğŸ‰ FastAPI ÙŠØ¹Ù…Ù„ Ø¨Ù†Ø¬Ø§Ø­ Ø¯Ø§Ø®Ù„ Google Colab!"}

@app.post("/execute_code")
async def execute_code(request: Request):
    data = await request.json()
    code = data.get("code")

    try:
        exec_locals = {}
        exec(code, {}, exec_locals)
        result = exec_locals.get("result", "ØªÙ… ØªÙ†ÙÙŠØ° Ø§Ù„ÙƒÙˆØ¯ Ø¨Ù†Ø¬Ø§Ø­!")

        return {"status": "success", "result": result}

    except Exception as e:
        return {"status": "error", "message": str(e)}

# ØªØ´ØºÙŠÙ„ FastAPI ÙÙŠ Google Colab
def run_api():
    uvicorn.run(app, host="0.0.0.0", port=8000)

# ÙØªØ­ Ù†ÙÙ‚ Ngrok Ø¹Ù„Ù‰ Ø§Ù„Ù…Ù†ÙØ° 8000
public_url = ngrok.connect(8000)
print("ğŸ”— Ø±Ø§Ø¨Ø· API Ø§Ù„Ø¹Ø§Ù…:", public_url)

# ØªØ´ØºÙŠÙ„ FastAPI
run_api()

# ØªØ«Ø¨ÙŠØª Ø§Ù„Ù…ÙƒØªØ¨Ø§Øª Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©
!pip install fastapi uvicorn nest_asyncio pyngrok

from fastapi import FastAPI, Request
import uvicorn
import nest_asyncio
from pyngrok import ngrok
import subprocess

# ØªÙØ¹ÙŠÙ„ Ø§Ù„ØªØ´ØºÙŠÙ„ Ø§Ù„Ù…ØªØ²Ø§Ù…Ù†
nest_asyncio.apply()

# Ø¥Ù†Ø´Ø§Ø¡ ØªØ·Ø¨ÙŠÙ‚ FastAPI
app = FastAPI()

@app.get("/")
def read_root():
    return {"message": "ğŸ‰ FastAPI ÙŠØ¹Ù…Ù„ Ø¨Ù†Ø¬Ø§Ø­ Ø¯Ø§Ø®Ù„ Google Colab!"}

@app.post("/execute_code")
async def execute_code(request: Request):
    data = await request.json()
    code = data.get("code")

    try:
        exec_locals = {}
        exec(code, {}, exec_locals)
        result = exec_locals.get("result", "ØªÙ… ØªÙ†ÙÙŠØ° Ø§Ù„ÙƒÙˆØ¯ Ø¨Ù†Ø¬Ø§Ø­!")

        return {"status": "success", "result": result}

    except Exception as e:
        return {"status": "error", "message": str(e)}

# ØªØ´ØºÙŠÙ„ FastAPI ÙÙŠ Ø§Ù„Ø®Ù„ÙÙŠØ© Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… subprocess
subprocess.Popen(["uvicorn", "main:app", "--host", "0.0.0.0", "--port", "8000"])

# ØªØ´ØºÙŠÙ„ Ngrok Ù„Ø±Ø¨Ø· FastAPI Ø¨Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª
public_url = ngrok.connect(8000)
print("ğŸ”— Ø±Ø§Ø¨Ø· API Ø§Ù„Ø¹Ø§Ù…:", public_url)

!kill -9 $(lsof -t -i:8000)

# ØªØ«Ø¨ÙŠØª Ø§Ù„Ù…ÙƒØªØ¨Ø§Øª Ø¥Ø°Ø§ Ù„Ù… ØªÙƒÙ† Ù…Ø«Ø¨ØªØ©
!pip install fastapi uvicorn nest_asyncio pyngrok

from fastapi import FastAPI, Request
import uvicorn
import nest_asyncio
from pyngrok import ngrok
import threading

# ØªÙØ¹ÙŠÙ„ Ø§Ù„ØªØ´ØºÙŠÙ„ Ø§Ù„Ù…ØªØ²Ø§Ù…Ù†
nest_asyncio.apply()

# Ø¥Ù†Ø´Ø§Ø¡ ØªØ·Ø¨ÙŠÙ‚ FastAPI
app = FastAPI()

@app.get("/")
def read_root():
    return {"message": "ğŸ‰ FastAPI ÙŠØ¹Ù…Ù„ Ø¨Ù†Ø¬Ø§Ø­ Ø¯Ø§Ø®Ù„ Google Colab!"}

@app.post("/execute_code")
async def execute_code(request: Request):
    data = await request.json()
    code = data.get("code")

    try:
        exec_locals = {}
        exec(code, {}, exec_locals)
        result = exec_locals.get("result", "ØªÙ… ØªÙ†ÙÙŠØ° Ø§Ù„ÙƒÙˆØ¯ Ø¨Ù†Ø¬Ø§Ø­!")

        return {"status": "success", "result": result}

    except Exception as e:
        return {"status": "error", "message": str(e)}

# ØªØ´ØºÙŠÙ„ FastAPI ÙÙŠ Thread Ù…Ø³ØªÙ‚Ù„ Ù„Ù…Ù†Ø¹ Ø§Ù„ØªÙˆÙ‚Ù
def run_api():
    uvicorn.run(app, host="0.0.0.0", port=8000)

threading.Thread(target=run_api, daemon=True).start()

# ØªØ´ØºÙŠÙ„ Ngrok ÙˆØ±Ø¨Ø· FastAPI Ø¨Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª
public_url = ngrok.connect(8000)
print("ğŸ”— Ø±Ø§Ø¨Ø· API Ø§Ù„Ø¹Ø§Ù…:", public_url)

import requests

# ğŸ”— Ø±Ø§Ø¨Ø· API Ø§Ù„Ø®Ø§Øµ Ø¨Ùƒ
API_URL = "https://cd35-35-197-72-15.ngrok-free.app/execute_code"

# ğŸ”¹ ÙƒÙˆØ¯ Python Ù„ØªØ´ØºÙŠÙ„Ù‡ ÙÙŠ Google Colab Ø¹Ø¨Ø± API
data = {
    "code": "result = 10 + 5"
}

# ğŸ”¹ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨ Ø¥Ù„Ù‰ API ÙÙŠ Google Colab
response = requests.post(API_URL, json=data)

# ğŸ”¹ Ø·Ø¨Ø§Ø¹Ø© Ø§Ù„Ù†ØªÙŠØ¬Ø© Ø§Ù„Ù…Ø³ØªØ±Ø¬Ø¹Ø© Ù…Ù† Google Colab
print("ğŸ”¹ Ø§Ù„Ù†ØªÙŠØ¬Ø© Ø§Ù„Ù…Ø³ØªØ±Ø¬Ø¹Ø©:", response.json())

import requests

# ğŸ”¹ Ø§Ø³ØªØ¨Ø¯Ù„ Ù‡Ø°Ù‡ Ø§Ù„Ù‚ÙŠÙ… Ø¨ØªÙˆÙƒÙ† Ø§Ù„Ø¨ÙˆØª ÙˆÙ…Ø¹Ø±Ù Ø§Ù„Ø´Ø§Øª Ø§Ù„Ø®Ø§Øµ Ø¨Ùƒ
TELEGRAM_BOT_TOKEN = "7629955358:AAHiu4vnCiiyyI73oETO4VDA--yZC3c2qqQ"
TELEGRAM_CHAT_ID = "1200335142"

def send_to_telegram(result):
    """Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ù†ØªÙŠØ¬Ø© Ø¥Ù„Ù‰ Telegram"""
    message = f"ğŸ”¹ Ø§Ù„Ù†ØªÙŠØ¬Ø© Ù…Ù† Google Colab: {result}"
    requests.get(f"https://api.telegram.org/bot{TELEGRAM_BOT_TOKEN}/sendMessage?chat_id={TELEGRAM_CHAT_ID}&text={message}")

# ğŸ”¹ Ù…Ø­Ø§ÙƒØ§Ø© Ø§Ø³ØªÙ„Ø§Ù… Ù†ØªÙŠØ¬Ø© Ù…Ù† Google Colab
result_from_colab = 10 + 5  # Ù…Ø«Ø§Ù„ Ù„Ù†ØªÙŠØ¬Ø© Ù…Ø±Ø³Ù„Ø© Ù…Ù† API
send_to_telegram(result_from_colab)

import requests
from flask import Flask, request, jsonify
import subprocess
import threading

# ğŸ”¹ Ø¥Ø¹Ø¯Ø§Ø¯ ØªÙˆÙƒÙ† Ø§Ù„Ø¨ÙˆØª ÙˆÙ…Ø¹Ø±Ù Ø§Ù„Ø´Ø§Øª Ø§Ù„Ø®Ø§Øµ Ø¨Ùƒ
TELEGRAM_BOT_TOKEN = "7629955358:AAHiu4vnCiiyyI73oETO4VDA--yZC3c2qqQ"
TELEGRAM_CHAT_ID = "1200335142"

# ğŸ”¹ Ø¥Ø¹Ø¯Ø§Ø¯ ØªØ·Ø¨ÙŠÙ‚ Flask Ù„ØªØ´ØºÙŠÙ„ Webhook Ø¯Ø§Ø®Ù„ Google Colab
app = Flask(__name__)

@app.route(f"/{TELEGRAM_BOT_TOKEN}", methods=["POST"])
def receive_message():
    data = request.json
    message_text = data["message"]["text"]
    chat_id = data["message"]["chat"]["id"]

    # ğŸ”¹ Ø§Ù„ØªØ£ÙƒØ¯ Ø£Ù† Ø§Ù„Ø±Ø³Ø§Ù„Ø© ÙˆØ§Ø±Ø¯Ø© Ù…Ù† Ù…Ø¹Ø±Ù Ø§Ù„Ø´Ø§Øª Ø§Ù„ØµØ­ÙŠØ­
    if str(chat_id) != TELEGRAM_CHAT_ID:
        return jsonify({"status": "error", "message": "Unauthorized chat ID"}), 403

    # ğŸ”¹ ØªÙ†ÙÙŠØ° Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„Ù…Ø³ØªÙ„Ù… Ù…Ù† Telegram
    try:
        exec_locals = {}
        exec(message_text, {}, exec_locals)
        result = exec_locals.get("result", "âœ… ØªÙ… ØªÙ†ÙÙŠØ° Ø§Ù„ÙƒÙˆØ¯ Ø¨Ù†Ø¬Ø§Ø­!")

    except Exception as e:
        result = f"âŒ Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ ØªÙ†ÙÙŠØ° Ø§Ù„ÙƒÙˆØ¯: {str(e)}"

    # ğŸ”¹ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ù†ØªÙŠØ¬Ø© Ø¥Ù„Ù‰ Telegram
    send_to_telegram(result)
    return jsonify({"status": "success", "result": result})

def send_to_telegram(result):
    """Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ù†ØªÙŠØ¬Ø© Ø¥Ù„Ù‰ Telegram"""
    url = f"https://api.telegram.org/bot{TELEGRAM_BOT_TOKEN}/sendMessage"
    data = {"chat_id": TELEGRAM_CHAT_ID, "text": f"ğŸ”¹ Ù†ØªÙŠØ¬Ø© Ø§Ù„ØªÙ†ÙÙŠØ°:\n{result}"}
    requests.post(url, data=data)

# ğŸ”¹ ØªØ´ØºÙŠÙ„ Flask ÙÙŠ Thread Ù…Ù†ÙØµÙ„
def run_flask():
    app.run(host="0.0.0.0", port=5000)

threading.Thread(target=run_flask, daemon=True).start()

# ğŸ”¹ Ø±Ø¨Ø· Google Colab Ø¨Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª Ø¹Ø¨Ø± Ngrok
from pyngrok import ngrok
public_url = ngrok.connect(5000)
print(f"ğŸ”— Ø±Ø§Ø¨Ø· Webhook: {public_url}/{TELEGRAM_BOT_TOKEN}")

# ğŸ”¹ Ø¥Ø¹Ø¯Ø§Ø¯ Webhook ÙÙŠ Telegram
telegram_url = f"https://api.telegram.org/bot{TELEGRAM_BOT_TOKEN}/setWebhook?url={public_url}/{TELEGRAM_BOT_TOKEN}"
requests.get(telegram_url)
print("âœ… Webhook Ù…ØªØµÙ„ Ø¨Ù€ Telegram Ø¨Ù†Ø¬Ø§Ø­!")

# ğŸ”¹ ØªØ«Ø¨ÙŠØª Ù…ÙƒØªØ¨Ø§Øª Stable Diffusion
!pip install diffusers transformers accelerate torch torchvision

from diffusers import StableDiffusionPipeline
import torch

# ğŸ”¹ ØªØ­Ù…ÙŠÙ„ Ù†Ù…ÙˆØ°Ø¬ Stable Diffusion
pipe = StableDiffusionPipeline.from_pretrained("CompVis/stable-diffusion-v1-4")
pipe.to("cuda")  # ØªØ´ØºÙŠÙ„ Ø¹Ù„Ù‰ GPU

# ğŸ”¹ ØªÙˆÙ„ÙŠØ¯ ØµÙˆØ±Ø© Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ ÙˆØµÙ Ù†ØµÙŠ
def generate_image(prompt):
    image = pipe(prompt).images[0]
    image_path = "generated_image.png"
    image.save(image_path)
    return image_path

# ğŸ”¹ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„ØµÙˆØ±Ø© Ø¥Ù„Ù‰ Telegram
def send_image_to_telegram(image_path):
    url = f"https://api.telegram.org/bot{TELEGRAM_BOT_TOKEN}/sendPhoto"
    with open(image_path, "rb") as image_file:
        files = {"photo": image_file}
        data = {"chat_id": TELEGRAM_CHAT_ID, "caption": "ğŸ”¹ Ù‡Ø°Ù‡ Ù‡ÙŠ Ø§Ù„ØµÙˆØ±Ø© Ø§Ù„ØªÙŠ ØªÙ… Ø¥Ù†Ø´Ø§Ø¤Ù‡Ø§ Ø¨ÙˆØ§Ø³Ø·Ø© Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ!"}
        response = requests.post(url, files=files, data=data)
        return response.json()

# ğŸ”¹ ØªØ´ØºÙŠÙ„ Ø§Ù„Ù†Ù…ÙˆØ°Ø¬ ÙˆØ¥Ø±Ø³Ø§Ù„ Ø§Ù„ØµÙˆØ±Ø© Ø¥Ù„Ù‰ Telegram
prompt_text = "A futuristic cyberpunk city at sunset"
image_path = generate_image(prompt_text)
send_result = send_image_to_telegram(image_path)

# ğŸ”¹ Ø·Ø¨Ø§Ø¹Ø© Ø§Ù„Ù†ØªÙŠØ¬Ø© Ù„Ù„ØªØ­Ù‚Ù‚
print("ğŸ“© ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„ØµÙˆØ±Ø© Ø¥Ù„Ù‰ Telegram:", send_result)

import torch
print("ğŸ”¹ Ù‡Ù„ ÙŠÙˆØ¬Ø¯ GPU Ù…ØªØ§Ø­ØŸ", torch.cuda.is_available())
print("ğŸ”¹ Ø§Ø³Ù… ÙˆØ­Ø¯Ø© GPU Ø§Ù„Ù…ØªØ§Ø­Ø©:", torch.cuda.get_device_name(0) if torch.cuda.is_available() else "âŒ Ù„Ø§ ÙŠÙˆØ¬Ø¯ GPU")

import requests
from diffusers import StableDiffusionPipeline
import torch

# ğŸ”¹ Ø¥Ø¹Ø¯Ø§Ø¯ ØªÙˆÙƒÙ† Ø§Ù„Ø¨ÙˆØª ÙˆÙ…Ø¹Ø±Ù Ø§Ù„Ø´Ø§Øª ÙÙŠ Telegram
TELEGRAM_BOT_TOKEN = "7629955358:AAHiu4vnCiiyyI73oETO4VDA--yZC3c2qqQ"
TELEGRAM_CHAT_ID = "1200335142"

# ğŸ”¹ ØªØ­Ù…ÙŠÙ„ Ù†Ù…ÙˆØ°Ø¬ Stable Diffusion
pipe = StableDiffusionPipeline.from_pretrained("CompVis/stable-diffusion-v1-4")
pipe.to("cuda")  # ØªØ´ØºÙŠÙ„ Ø¹Ù„Ù‰ GPU

print("âœ… ØªÙ… ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù†Ù…ÙˆØ°Ø¬ ÙˆØªØ´ØºÙŠÙ„Ù‡ Ø¹Ù„Ù‰ GPU!")

# ğŸ”¹ ØªÙˆÙ„ÙŠØ¯ ØµÙˆØ±Ø© Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ ÙˆØµÙ Ù†ØµÙŠ
def generate_image(prompt):
    print(f"ğŸ”¹ ØªÙˆÙ„ÙŠØ¯ ØµÙˆØ±Ø© Ù„Ù„ÙˆØµÙ: {prompt}")
    image = pipe(prompt).images[0]
    image_path = "generated_image.png"
    image.save(image_path)
    return image_path

# ğŸ”¹ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„ØµÙˆØ±Ø© Ø¥Ù„Ù‰ Telegram
def send_image_to_telegram(image_path):
    url = f"https://api.telegram.org/bot{TELEGRAM_BOT_TOKEN}/sendPhoto"
    with open(image_path, "rb") as image_file:
        files = {"photo": image_file}
        data = {"chat_id": TELEGRAM_CHAT_ID, "caption": "ğŸ”¹ Ù‡Ø°Ù‡ Ù‡ÙŠ Ø§Ù„ØµÙˆØ±Ø© Ø§Ù„ØªÙŠ ØªÙ… Ø¥Ù†Ø´Ø§Ø¤Ù‡Ø§ Ø¨ÙˆØ§Ø³Ø·Ø© Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ!"}
        response = requests.post(url, files=files, data=data)
        return response.json()

# ğŸ”¹ ØªØ´ØºÙŠÙ„ Ø§Ù„Ù†Ù…ÙˆØ°Ø¬ ÙˆØ¥Ø±Ø³Ø§Ù„ Ø§Ù„ØµÙˆØ±Ø© Ø¥Ù„Ù‰ Telegram
prompt_text = "A futuristic cyberpunk city at sunset"
image_path = generate_image(prompt_text)
send_result = send_image_to_telegram(image_path)

# ğŸ”¹ Ø·Ø¨Ø§Ø¹Ø© Ø§Ù„Ù†ØªÙŠØ¬Ø© Ù„Ù„ØªØ­Ù‚Ù‚
print("ğŸ“© ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„ØµÙˆØ±Ø© Ø¥Ù„Ù‰ Telegram:", send_result)

from google.colab import drive
import os

# ğŸ”¹ ØªØ­Ù…ÙŠÙ„ Google Drive
drive.mount('/content/drive')

# ğŸ”¹ ØªØ­Ø¯ÙŠØ¯ Ù…Ø³Ø§Ø± Ø§Ù„Ù…Ù„Ù Ø§Ù„Ù…Ø®Ø²Ù† ÙÙŠ Google Drive
config_path = "/content/drive/My Drive/telegram_config.txt"

# ğŸ”¹ Ù‚Ø±Ø§Ø¡Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ù† Ø§Ù„Ù…Ù„Ù
def load_telegram_config(config_path):
    config = {}
    with open(config_path, "r") as file:
        for line in file:
            key, value = line.strip().split("=")
            config[key] = value
    return config

# ğŸ”¹ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØªÙˆÙƒÙ† ÙˆÙ…Ø¹Ø±Ù Ø§Ù„Ø´Ø§Øª
telegram_config = load_telegram_config(config_path)
TELEGRAM_BOT_TOKEN = telegram_config.get("TELEGRAM_BOT_TOKEN")
TELEGRAM_CHAT_ID = telegram_config.get("TELEGRAM_CHAT_ID")

# ğŸ”¹ Ø·Ø¨Ø§Ø¹Ø© Ø§Ù„Ù‚ÙŠÙ… Ù„Ù„ØªØ£ÙƒØ¯ (ÙŠÙ…ÙƒÙ†Ùƒ Ø­Ø°ÙÙ‡Ø§ Ù„Ø§Ø­Ù‚Ù‹Ø§)
print(f"ğŸ”¹ ØªÙˆÙƒÙ† Ø§Ù„Ø¨ÙˆØª: {TELEGRAM_BOT_TOKEN[:10]}********")
print(f"ğŸ”¹ Ù…Ø¹Ø±Ù Ø§Ù„Ø´Ø§Øª: {TELEGRAM_CHAT_ID}")

from google.colab import drive
import os

# ğŸ”¹ ØªØ­Ù…ÙŠÙ„ Google Drive
drive.mount('/content/drive')

# ğŸ”¹ Ø¹Ø±Ø¶ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ù„ÙØ§Øª ÙÙŠ My Drive
!ls "/content/drive/My Drive"

# ğŸ”¹ ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù…Ø³Ø§Ø± Ø§Ù„ØµØ­ÙŠØ­ Ù„Ù„Ù…Ù„Ù Ø¯Ø§Ø®Ù„ Google Drive
config_path = "/content/drive/My Drive/telegram_config.txt"

# ğŸ”¹ ÙˆØ¸ÙŠÙØ© Ù„ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù‚ÙŠÙ… Ù…Ù† Ø§Ù„Ù…Ù„Ù
def load_telegram_config(config_path):
    config = {}
    if os.path.exists(config_path):
        with open(config_path, "r") as file:
            for line in file:
                key, value = line.strip().split("=")
                config[key] = value
        return config
    else:
        print(f"âŒ Ø§Ù„Ù…Ù„Ù ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯ ÙÙŠ: {config_path}")
        return None

# ğŸ”¹ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù‚ÙŠÙ… Ù…Ù† Google Drive
telegram_config = load_telegram_config(config_path)

# ğŸ”¹ Ø§Ù„ØªØ£ÙƒØ¯ Ù…Ù† ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù‚ÙŠÙ… Ø¨Ù†Ø¬Ø§Ø­
if telegram_config:
    TELEGRAM_BOT_TOKEN = telegram_config.get("TELEGRAM_BOT_TOKEN")
    TELEGRAM_CHAT_ID = telegram_config.get("TELEGRAM_CHAT_ID")

    print(f"âœ… ØªÙ… ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØªÙˆÙƒÙ†: {TELEGRAM_BOT_TOKEN[:10]}********")
    print(f"âœ… ØªÙ… ØªØ­Ù…ÙŠÙ„ Ù…Ø¹Ø±Ù Ø§Ù„Ø´Ø§Øª: {TELEGRAM_CHAT_ID}")
else:
    print("âŒ ØªØ£ÙƒØ¯ Ù…Ù† Ø£Ù† Ø§Ù„Ù…Ù„Ù Ù…ÙˆØ¬ÙˆØ¯ ÙÙŠ Ø§Ù„Ù…Ø³Ø§Ø± Ø§Ù„ØµØ­ÙŠØ­ ÙˆØ£Ø¹Ø¯ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø©.")

from google.colab import drive
import os

# ğŸ”¹ ØªØ­Ù…ÙŠÙ„ Google Drive
drive.mount('/content/drive', force_remount=True)

# ğŸ”¹ Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ø§Ù„Ù…Ù„Ù Ø¯Ø§Ø®Ù„ Google Drive
!find /content/drive -name "telegram_config*"

import os

# ğŸ”¹ ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù…Ø³Ø§Ø± Ø§Ù„ØµØ­ÙŠØ­ Ù„Ù„Ù…Ù„Ù
config_path = "/content/drive/MyDrive/telegram_config.txt"

# ğŸ”¹ ÙˆØ¸ÙŠÙØ© Ù„ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù‚ÙŠÙ… Ù…Ù† Ø§Ù„Ù…Ù„Ù
def load_telegram_config(config_path):
    config = {}
    if os.path.exists(config_path):
        with open(config_path, "r") as file:
            for line in file:
                key, value = line.strip().split("=")
                config[key] = value
        return config
    else:
        print(f"âŒ Ø§Ù„Ù…Ù„Ù ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯ ÙÙŠ: {config_path}")
        return None

# ğŸ”¹ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù‚ÙŠÙ… Ù…Ù† Google Drive
telegram_config = load_telegram_config(config_path)

# ğŸ”¹ Ø§Ù„ØªØ£ÙƒØ¯ Ù…Ù† ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù‚ÙŠÙ… Ø¨Ù†Ø¬Ø§Ø­
if telegram_config:
    TELEGRAM_BOT_TOKEN = telegram_config.get("TELEGRAM_BOT_TOKEN")
    TELEGRAM_CHAT_ID = telegram_config.get("TELEGRAM_CHAT_ID")

    print(f"âœ… ØªÙ… ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØªÙˆÙƒÙ†: {TELEGRAM_BOT_TOKEN[:10]}********")
    print(f"âœ… ØªÙ… ØªØ­Ù…ÙŠÙ„ Ù…Ø¹Ø±Ù Ø§Ù„Ø´Ø§Øª: {TELEGRAM_CHAT_ID}")
else:
    print("âŒ ØªØ£ÙƒØ¯ Ù…Ù† Ø£Ù† Ø§Ù„Ù…Ù„Ù Ù…ÙˆØ¬ÙˆØ¯ ÙÙŠ Ø§Ù„Ù…Ø³Ø§Ø± Ø§Ù„ØµØ­ÙŠØ­ ÙˆØ£Ø¹Ø¯ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø©.")

import os

# ğŸ”¹ ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù…Ø³Ø§Ø± Ø§Ù„ØµØ­ÙŠØ­ Ù„Ù„Ù…Ù„Ù
config_path = "/content/drive/MyDrive/telegram_config.txt"

# ğŸ”¹ ÙˆØ¸ÙŠÙØ© Ù„ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù‚ÙŠÙ… Ù…Ù† Ø§Ù„Ù…Ù„Ù Ù…Ø¹ Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ø£Ø®Ø·Ø§Ø¡
def load_telegram_config(config_path):
    config = {}
    if os.path.exists(config_path):
        with open(config_path, "r") as file:
            for line in file:
                line = line.strip()
                if "=" in line:  # âœ… Ø§Ù„ØªØ£ÙƒØ¯ Ù…Ù† Ø£Ù† Ø§Ù„Ø³Ø·Ø± ÙŠØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ "=" Ù‚Ø¨Ù„ ØªÙ‚Ø³ÙŠÙ…Ù‡
                    key, value = line.split("=", 1)  # âœ… ØªÙ‚Ø³ÙŠÙ… Ø§Ù„Ø³Ø·Ø± Ù…Ø±Ø© ÙˆØ§Ø­Ø¯Ø© ÙÙ‚Ø·
                    config[key] = value
    else:
        print(f"âŒ Ø§Ù„Ù…Ù„Ù ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯ ÙÙŠ: {config_path}")
    return config

# ğŸ”¹ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù‚ÙŠÙ… Ù…Ù† Google Drive
telegram_config = load_telegram_config(config_path)

# ğŸ”¹ Ø§Ù„ØªØ£ÙƒØ¯ Ù…Ù† ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù‚ÙŠÙ… Ø¨Ù†Ø¬Ø§Ø­
if "TELEGRAM_BOT_TOKEN" in telegram_config and "TELEGRAM_CHAT_ID" in telegram_config:
    TELEGRAM_BOT_TOKEN = telegram_config["TELEGRAM_BOT_TOKEN"]
    TELEGRAM_CHAT_ID = telegram_config["TELEGRAM_CHAT_ID"]

    print(f"âœ… ØªÙ… ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØªÙˆÙƒÙ†: {TELEGRAM_BOT_TOKEN[:10]}********")
    print(f"âœ… ØªÙ… ØªØ­Ù…ÙŠÙ„ Ù…Ø¹Ø±Ù Ø§Ù„Ø´Ø§Øª: {TELEGRAM_CHAT_ID}")
else:
    print("âŒ ØªØ£ÙƒØ¯ Ù…Ù† Ø£Ù† Ø§Ù„Ù‚ÙŠÙ… Ù…ÙˆØ¬ÙˆØ¯Ø© Ø¨Ø´ÙƒÙ„ ØµØ­ÙŠØ­ ÙÙŠ Ø§Ù„Ù…Ù„Ù.")

import requests

# ğŸ”¹ Ø¥Ø±Ø³Ø§Ù„ Ø±Ø³Ø§Ù„Ø© Ø¥Ù„Ù‰ Telegram Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ù‚ÙŠÙ… Ø§Ù„Ù…Ø­ÙÙˆØ¸Ø©
def send_message(message):
    url = f"https://api.telegram.org/bot{TELEGRAM_BOT_TOKEN}/sendMessage"
    data = {"chat_id": TELEGRAM_CHAT_ID, "text": message}
    response = requests.post(url, data=data)
    return response.json()

# ğŸ”¹ ØªØ¬Ø±Ø¨Ø© Ø¥Ø±Ø³Ø§Ù„ Ø±Ø³Ø§Ù„Ø© ØªØ£ÙƒÙŠØ¯
send_message("âœ… ØªÙ… ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØªÙˆÙƒÙ† ÙˆÙ…Ø¹Ø±Ù Ø§Ù„Ø´Ø§Øª Ù…Ù† Google Drive Ø¨Ù†Ø¬Ø§Ø­ØŒ ÙˆØ§Ù„Ø¨ÙˆØª ÙŠØ¹Ù…Ù„ Ø§Ù„Ø¢Ù†! ğŸš€")

import requests
from flask import Flask, request, jsonify
import threading
from pyngrok import ngrok
import os

# ğŸ”¹ ØªØ­Ù…ÙŠÙ„ Google Drive (Ù„Ù„ØªØ£ÙƒØ¯ Ù…Ù† Ø£Ù† Ø§Ù„ØªÙˆÙƒÙ† Ù…ØªØ§Ø­)
from google.colab import drive
drive.mount('/content/drive', force_remount=True)

# ğŸ”¹ ØªØ­Ø¯ÙŠØ¯ Ù…Ø³Ø§Ø± Ù…Ù„Ù Ø§Ù„ØªÙˆÙƒÙ† Ø§Ù„Ù…Ø®Ø²Ù† ÙÙŠ Google Drive
config_path = "/content/drive/MyDrive/telegram_config.txt"

# ğŸ”¹ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù‚ÙŠÙ… Ø§Ù„Ù…Ø®Ø²Ù†Ø©
def load_telegram_config(config_path):
    config = {}
    if os.path.exists(config_path):
        with open(config_path, "r") as file:
            for line in file:
                key, value = line.strip().split("=")
                config[key] = value
    return config

telegram_config = load_telegram_config(config_path)

# ğŸ”¹ Ø§Ø³ØªØ±Ø¬Ø§Ø¹ Ø§Ù„ØªÙˆÙƒÙ† ÙˆÙ…Ø¹Ø±Ù Ø§Ù„Ø´Ø§Øª Ù…Ù† Ø§Ù„Ù…Ù„Ù
TELEGRAM_BOT_TOKEN = telegram_config["TELEGRAM_BOT_TOKEN"]
TELEGRAM_CHAT_ID = telegram_config["TELEGRAM_CHAT_ID"]

# ğŸ”¹ Ø¥Ø¹Ø¯Ø§Ø¯ Flask Ù„Ø¹Ù…Ù„ Webhook
app = Flask(__name__)

@app.route(f"/{TELEGRAM_BOT_TOKEN}", methods=["POST"])
def receive_message():
    data = request.json
    if "message" in data:
        message_text = data["message"]["text"]
        chat_id = data["message"]["chat"]["id"]

        # ğŸ”¹ Ø§Ù„ØªØ£ÙƒØ¯ Ø£Ù† Ø§Ù„Ø±Ø³Ø§Ù„Ø© ÙˆØ§Ø±Ø¯Ø© Ù…Ù† Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù„ØµØ­ÙŠØ­
        if str(chat_id) != TELEGRAM_CHAT_ID:
            return jsonify({"status": "error", "message": "Unauthorized chat ID"}), 403

        # ğŸ”¹ ØªÙ†ÙÙŠØ° Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„Ù…Ø³ØªÙ„Ù…
        try:
            exec_locals = {}
            exec(message_text, {}, exec_locals)
            result = exec_locals.get("result", "âœ… ØªÙ… ØªÙ†ÙÙŠØ° Ø§Ù„ÙƒÙˆØ¯ Ø¨Ù†Ø¬Ø§Ø­!")
        except Exception as e:
            result = f"âŒ Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ ØªÙ†ÙÙŠØ° Ø§Ù„ÙƒÙˆØ¯: {str(e)}"

        # ğŸ”¹ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ù†ØªÙŠØ¬Ø© Ø¥Ù„Ù‰ Telegram
        send_to_telegram(result)
        return jsonify({"status": "success", "result": result})

def send_to_telegram(result):
    """Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ù†ØªÙŠØ¬Ø© Ø¥Ù„Ù‰ Telegram"""
    url = f"https://api.telegram.org/bot{TELEGRAM_BOT_TOKEN}/sendMessage"
    data = {"chat_id": TELEGRAM_CHAT_ID, "text": f"ğŸ”¹ Ù†ØªÙŠØ¬Ø© Ø§Ù„ØªÙ†ÙÙŠØ°:\n{result}"}
    requests.post(url, data=data)

# ğŸ”¹ ØªØ´ØºÙŠÙ„ Flask ÙÙŠ Thread Ù…Ù†ÙØµÙ„
def run_flask():
    app.run(host="0.0.0.0", port=5000)

threading.Thread(target=run_flask, daemon=True).start()

# ğŸ”¹ ØªØ´ØºÙŠÙ„ Ngrok ÙˆØ±Ø¨Ø· Google Colab Ø¨Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª
public_url = ngrok.connect(5000).public_url
print(f"ğŸ”— Ø±Ø§Ø¨Ø· Webhook Ø§Ù„Ø¬Ø¯ÙŠØ¯: {public_url}/{TELEGRAM_BOT_TOKEN}")

# ğŸ”¹ ØªØ­Ø¯ÙŠØ« Webhook ÙÙŠ Telegram
telegram_url = f"https://api.telegram.org/bot{TELEGRAM_BOT_TOKEN}/setWebhook?url={public_url}/{TELEGRAM_BOT_TOKEN}"
requests.get(telegram_url)
print("âœ… Webhook Ù…ØªØµÙ„ Ø¨Ù€ Telegram Ø¨Ù†Ø¬Ø§Ø­!")

!pip install pyngrok

!pip install flask pyngrok

import requests
from flask import Flask, request, jsonify
import threading
from pyngrok import ngrok
import os

# ğŸ”¹ ØªØ­Ù…ÙŠÙ„ Google Drive
from google.colab import drive
drive.mount('/content/drive', force_remount=True)

# ğŸ”¹ ØªØ­Ø¯ÙŠØ¯ Ù…Ø³Ø§Ø± Ù…Ù„Ù Ø§Ù„ØªÙˆÙƒÙ† ÙÙŠ Google Drive
config_path = "/content/drive/MyDrive/telegram_config.txt"

# ğŸ”¹ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù‚ÙŠÙ… Ø§Ù„Ù…Ø®Ø²Ù†Ø©
def load_telegram_config(config_path):
    config = {}
    if os.path.exists(config_path):
        with open(config_path, "r") as file:
            for line in file:
                key, value = line.strip().split("=")
                config[key] = value
    return config

telegram_config = load_telegram_config(config_path)

# ğŸ”¹ Ø§Ø³ØªØ±Ø¬Ø§Ø¹ Ø§Ù„ØªÙˆÙƒÙ† ÙˆÙ…Ø¹Ø±Ù Ø§Ù„Ø´Ø§Øª Ù…Ù† Ø§Ù„Ù…Ù„Ù
TELEGRAM_BOT_TOKEN = telegram_config["TELEGRAM_BOT_TOKEN"]
TELEGRAM_CHAT_ID = telegram_config["TELEGRAM_CHAT_ID"]

# ğŸ”¹ Ø¥Ø¹Ø¯Ø§Ø¯ Flask Ù„Ø¹Ù…Ù„ Webhook
app = Flask(__name__)

@app.route(f"/{TELEGRAM_BOT_TOKEN}", methods=["POST"])
def receive_message():
    data = request.json
    if "message" in data:
        message_text = data["message"]["text"]
        chat_id = data["message"]["chat"]["id"]

        # ğŸ”¹ Ø§Ù„ØªØ£ÙƒØ¯ Ø£Ù† Ø§Ù„Ø±Ø³Ø§Ù„Ø© ÙˆØ§Ø±Ø¯Ø© Ù…Ù† Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù„ØµØ­ÙŠØ­
        if str(chat_id) != TELEGRAM_CHAT_ID:
            return jsonify({"status": "error", "message": "Unauthorized chat ID"}), 403

        # ğŸ”¹ ØªÙ†ÙÙŠØ° Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„Ù…Ø³ØªÙ„Ù…
        try:
            exec_locals = {}
            exec(message_text, {}, exec_locals)
            result = exec_locals.get("result", "âœ… ØªÙ… ØªÙ†ÙÙŠØ° Ø§Ù„ÙƒÙˆØ¯ Ø¨Ù†Ø¬Ø§Ø­!")
        except Exception as e:
            result = f"âŒ Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ ØªÙ†ÙÙŠØ° Ø§Ù„ÙƒÙˆØ¯: {str(e)}"

        # ğŸ”¹ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ù†ØªÙŠØ¬Ø© Ø¥Ù„Ù‰ Telegram
        send_to_telegram(result)
        return jsonify({"status": "success", "result": result})

def send_to_telegram(result):
    """Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ù†ØªÙŠØ¬Ø© Ø¥Ù„Ù‰ Telegram"""
    url = f"https://api.telegram.org/bot{TELEGRAM_BOT_TOKEN}/sendMessage"
    data = {"chat_id": TELEGRAM_CHAT_ID, "text": f"ğŸ”¹ Ù†ØªÙŠØ¬Ø© Ø§Ù„ØªÙ†ÙÙŠØ°:\n{result}"}
    requests.post(url, data=data)

# ğŸ”¹ ØªØ´ØºÙŠÙ„ Flask ÙÙŠ Thread Ù…Ù†ÙØµÙ„
def run_flask():
    app.run(host="0.0.0.0", port=5000)

threading.Thread(target=run_flask, daemon=True).start()

# ğŸ”¹ ØªØ´ØºÙŠÙ„ Ngrok ÙˆØ±Ø¨Ø· Google Colab Ø¨Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª
public_url = ngrok.connect(5000).public_url
print(f"ğŸ”— Ø±Ø§Ø¨Ø· Webhook Ø§Ù„Ø¬Ø¯ÙŠØ¯: {public_url}/{TELEGRAM_BOT_TOKEN}")

# ğŸ”¹ ØªØ­Ø¯ÙŠØ« Webhook ÙÙŠ Telegram
telegram_url = f"https://api.telegram.org/bot{TELEGRAM_BOT_TOKEN}/setWebhook?url={public_url}/{TELEGRAM_BOT_TOKEN}"
requests.get(telegram_url)
print("âœ… Webhook Ù…ØªØµÙ„ Ø¨Ù€ Telegram Ø¨Ù†Ø¬Ø§Ø­!")

config_path = "/content/drive/MyDrive/telegram_config.txt"

# ğŸ”¹ Ù‚Ø±Ø§Ø¡Ø© Ø§Ù„Ù…Ù„Ù ÙˆØ¹Ø±Ø¶ Ù…Ø­ØªÙˆØ§Ù‡ Ù„Ù„ØªØ£ÙƒØ¯ Ù…Ù† Ø§Ù„ØªÙ†Ø³ÙŠÙ‚ Ø§Ù„ØµØ­ÙŠØ­
with open(config_path, "r") as file:
    content = file.readlines()

print("ğŸ”¹ Ù…Ø­ØªÙˆÙ‰ `telegram_config.txt`:")
for line in content:
    print(f"> {line.strip()}")

import os

# ğŸ”¹ ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù…Ø³Ø§Ø± Ø§Ù„ØµØ­ÙŠØ­ Ù„Ù„Ù…Ù„Ù
config_path = "/content/drive/MyDrive/telegram_config.txt"

# ğŸ”¹ ÙˆØ¸ÙŠÙØ© Ù„ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù‚ÙŠÙ… Ù…Ù† Ø§Ù„Ù…Ù„Ù Ù…Ø¹ ØªØ¬Ø§Ù‡Ù„ Ø§Ù„Ø£Ø®Ø·Ø§Ø¡
def load_telegram_config(config_path):
    config = {}
    if os.path.exists(config_path):
        with open(config_path, "r") as file:
            for line in file:
                line = line.strip()
                if "=" in line:  # âœ… Ø§Ù„ØªØ£ÙƒØ¯ Ù…Ù† Ø£Ù† Ø§Ù„Ø³Ø·Ø± ÙŠØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ "=" Ù‚Ø¨Ù„ ØªÙ‚Ø³ÙŠÙ…Ù‡
                    key, value = line.split("=", 1)  # âœ… ØªÙ‚Ø³ÙŠÙ… Ø§Ù„Ø³Ø·Ø± Ù…Ø±Ø© ÙˆØ§Ø­Ø¯Ø© ÙÙ‚Ø·
                    config[key] = value
    else:
        print(f"âŒ Ø§Ù„Ù…Ù„Ù ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯ ÙÙŠ: {config_path}")
    return config

# ğŸ”¹ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù‚ÙŠÙ… Ù…Ù† Google Drive
telegram_config = load_telegram_config(config_path)

# ğŸ”¹ Ø§Ù„ØªØ£ÙƒØ¯ Ù…Ù† ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù‚ÙŠÙ… Ø¨Ù†Ø¬Ø§Ø­
if "TELEGRAM_BOT_TOKEN" in telegram_config and "TELEGRAM_CHAT_ID" in telegram_config:
    TELEGRAM_BOT_TOKEN = telegram_config["TELEGRAM_BOT_TOKEN"]
    TELEGRAM_CHAT_ID = telegram_config["TELEGRAM_CHAT_ID"]

    print(f"âœ… ØªÙ… ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØªÙˆÙƒÙ†: {TELEGRAM_BOT_TOKEN[:10]}********")
    print(f"âœ… ØªÙ… ØªØ­Ù…ÙŠÙ„ Ù…Ø¹Ø±Ù Ø§Ù„Ø´Ø§Øª: {TELEGRAM_CHAT_ID}")
else:
    print("âŒ ØªØ£ÙƒØ¯ Ù…Ù† Ø£Ù† Ø§Ù„Ù‚ÙŠÙ… Ù…ÙˆØ¬ÙˆØ¯Ø© Ø¨Ø´ÙƒÙ„ ØµØ­ÙŠØ­ ÙÙŠ Ø§Ù„Ù…Ù„Ù.")

!pip install flask pyngrok

import requests
from flask import Flask, request, jsonify
import threading
from pyngrok import ngrok
import os

# ğŸ”¹ ØªØ´ØºÙŠÙ„ Google Drive ÙˆØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù‚ÙŠÙ…
from google.colab import drive
drive.mount('/content/drive', force_remount=True)

# ğŸ”¹ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØªÙˆÙƒÙ† ÙˆÙ…Ø¹Ø±Ù Ø§Ù„Ø´Ø§Øª Ù…Ù† Google Drive
config_path = "/content/drive/MyDrive/telegram_config.txt"
telegram_config = load_telegram_config(config_path)

TELEGRAM_BOT_TOKEN = telegram_config["TELEGRAM_BOT_TOKEN"]
TELEGRAM_CHAT_ID = telegram_config["TELEGRAM_CHAT_ID"]

# ğŸ”¹ Ø¥Ø¹Ø¯Ø§Ø¯ Flask Ù„Ø¹Ù…Ù„ Webhook
app = Flask(__name__)

@app.route(f"/{TELEGRAM_BOT_TOKEN}", methods=["POST"])
def receive_message():
    data = request.json
    if "message" in data:
        message_text = data["message"]["text"]
        chat_id = data["message"]["chat"]["id"]

        # ğŸ”¹ Ø§Ù„ØªØ£ÙƒØ¯ Ø£Ù† Ø§Ù„Ø±Ø³Ø§Ù„Ø© ÙˆØ§Ø±Ø¯Ø© Ù…Ù† Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù„ØµØ­ÙŠØ­
        if str(chat_id) != TELEGRAM_CHAT_ID:
            return jsonify({"status": "error", "message": "Unauthorized chat ID"}), 403

        # ğŸ”¹ ØªÙ†ÙÙŠØ° Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„Ù…Ø³ØªÙ„Ù…
        try:
            exec_locals = {}
            exec(message_text, {}, exec_locals)
            result = exec_locals.get("result", "âœ… ØªÙ… ØªÙ†ÙÙŠØ° Ø§Ù„ÙƒÙˆØ¯ Ø¨Ù†Ø¬Ø§Ø­!")
        except Exception as e:
            result = f"âŒ Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ ØªÙ†ÙÙŠØ° Ø§Ù„ÙƒÙˆØ¯: {str(e)}"

        # ğŸ”¹ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ù†ØªÙŠØ¬Ø© Ø¥Ù„Ù‰ Telegram
        send_to_telegram(result)
        return jsonify({"status": "success", "result": result})

def send_to_telegram(result):
    """Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ù†ØªÙŠØ¬Ø© Ø¥Ù„Ù‰ Telegram"""
    url = f"https://api.telegram.org/bot{TELEGRAM_BOT_TOKEN}/sendMessage"
    data = {"chat_id": TELEGRAM_CHAT_ID, "text": f"ğŸ”¹ Ù†ØªÙŠØ¬Ø© Ø§Ù„ØªÙ†ÙÙŠØ°:\n{result}"}
    requests.post(url, data=data)

# ğŸ”¹ ØªØ´ØºÙŠÙ„ Flask ÙÙŠ Thread Ù…Ù†ÙØµÙ„
def run_flask():
    app.run(host="0.0.0.0", port=5000)

threading.Thread(target=run_flask, daemon=True).start()

# ğŸ”¹ ØªØ´ØºÙŠÙ„ Ngrok ÙˆØ±Ø¨Ø· Google Colab Ø¨Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª
public_url = ngrok.connect(5000).public_url
print(f"ğŸ”— Ø±Ø§Ø¨Ø· Webhook Ø§Ù„Ø¬Ø¯ÙŠØ¯: {public_url}/{TELEGRAM_BOT_TOKEN}")

# ğŸ”¹ ØªØ­Ø¯ÙŠØ« Webhook ÙÙŠ Telegram
telegram_url = f"https://api.telegram.org/bot{TELEGRAM_BOT_TOKEN}/setWebhook?url={public_url}/{TELEGRAM_BOT_TOKEN}"
requests.get(telegram_url)
print("âœ… Webhook Ù…ØªØµÙ„ Ø¨Ù€ Telegram Ø¨Ù†Ø¬Ø§Ø­!")

!ngrok authtoken 2u6BsGxIfgQPbF5wtOEO3aJEPf1_3DqKPAi4ZPnxuHkRSs2Sj

from pyngrok import ngrok

# ğŸ”¹ ØªØ´ØºÙŠÙ„ Ngrok ÙˆØ±Ø¨Ø· Google Colab Ø¨Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª
public_url = ngrok.connect(5000).public_url
print(f"ğŸ”— Ø±Ø§Ø¨Ø· Webhook Ø§Ù„Ø¬Ø¯ÙŠØ¯: {public_url}")

import requests

# ğŸ”¹ Ø¥Ø¹Ø¯Ø§Ø¯ Webhook Ù…Ø¹ Telegram
telegram_url = f"https://api.telegram.org/bot{TELEGRAM_BOT_TOKEN}/setWebhook?url={public_url}/{TELEGRAM_BOT_TOKEN}"
response = requests.get(telegram_url)

if response.status_code == 200:
    print("âœ… Webhook Ù…ØªØµÙ„ Ø¨Ù€ Telegram Ø¨Ù†Ø¬Ø§Ø­!")
else:
    print("âŒ ÙØ´Ù„ ÙÙŠ Ø±Ø¨Ø· Webhook. ØªØ£ÙƒØ¯ Ù…Ù† ØµØ­Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª.")

!pip install flask pyngrok requests diffusers transformers accelerate torch torchvision nest_asyncio fastapi uvicorn

from google.colab import drive
import os

# ğŸ”¹ ØªØ­Ù…ÙŠÙ„ Google Drive
drive.mount('/content/drive', force_remount=True)

# ğŸ”¹ ØªØ­Ø¯ÙŠØ¯ Ù…Ø³Ø§Ø± Ù…Ù„Ù Ø§Ù„ØªÙˆÙƒÙ† Ø§Ù„Ù…Ø®Ø²Ù† ÙÙŠ Google Drive
config_path = "/content/drive/MyDrive/telegram_config.txt"

# ğŸ”¹ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù‚ÙŠÙ… Ø§Ù„Ù…Ø®Ø²Ù†Ø©
def load_telegram_config(config_path):
    config = {}
    if os.path.exists(config_path):
        with open(config_path, "r") as file:
            for line in file:
                line = line.strip()
                if "=" in line:
                    key, value = line.split("=", 1)
                    config[key] = value
    return config

# ğŸ”¹ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù‚ÙŠÙ… Ù…Ù† Google Drive
telegram_config = load_telegram_config(config_path)

# ğŸ”¹ Ø§Ù„ØªØ£ÙƒØ¯ Ù…Ù† ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù‚ÙŠÙ… Ø¨Ù†Ø¬Ø§Ø­
if "TELEGRAM_BOT_TOKEN" in telegram_config and "TELEGRAM_CHAT_ID" in telegram_config:
    TELEGRAM_BOT_TOKEN = telegram_config["TELEGRAM_BOT_TOKEN"]
    TELEGRAM_CHAT_ID = telegram_config["TELEGRAM_CHAT_ID"]

    print(f"âœ… ØªÙ… ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØªÙˆÙƒÙ†: {TELEGRAM_BOT_TOKEN[:10]}********")
    print(f"âœ… ØªÙ… ØªØ­Ù…ÙŠÙ„ Ù…Ø¹Ø±Ù Ø§Ù„Ø´Ø§Øª: {TELEGRAM_CHAT_ID}")
else:
    print("âŒ ØªØ£ÙƒØ¯ Ù…Ù† Ø£Ù† Ø§Ù„Ù‚ÙŠÙ… Ù…ÙˆØ¬ÙˆØ¯Ø© Ø¨Ø´ÙƒÙ„ ØµØ­ÙŠØ­ ÙÙŠ Ø§Ù„Ù…Ù„Ù.")

import requests
from flask import Flask, request, jsonify
import threading
from pyngrok import ngrok

# ğŸ”¹ Ø¥Ø¹Ø¯Ø§Ø¯ Flask Ù„Ø¹Ù…Ù„ Webhook
app = Flask(__name__)

@app.route(f"/{TELEGRAM_BOT_TOKEN}", methods=["POST"])
def receive_message():
    data = request.json
    if "message" in data:
        message_text = data["message"]["text"]
        chat_id = data["message"]["chat"]["id"]

        # ğŸ”¹ Ø§Ù„ØªØ£ÙƒØ¯ Ø£Ù† Ø§Ù„Ø±Ø³Ø§Ù„Ø© ÙˆØ§Ø±Ø¯Ø© Ù…Ù† Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù„ØµØ­ÙŠØ­
        if str(chat_id) != TELEGRAM_CHAT_ID:
            return jsonify({"status": "error", "message": "Unauthorized chat ID"}), 403

        # ğŸ”¹ ØªÙ†ÙÙŠØ° Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„Ù…Ø³ØªÙ„Ù…
        try:
            exec_locals = {}
            exec(message_text, {}, exec_locals)
            result = exec_locals.get("result", "âœ… ØªÙ… ØªÙ†ÙÙŠØ° Ø§Ù„ÙƒÙˆØ¯ Ø¨Ù†Ø¬Ø§Ø­!")
        except Exception as e:
            result = f"âŒ Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ ØªÙ†ÙÙŠØ° Ø§Ù„ÙƒÙˆØ¯: {str(e)}"

        # ğŸ”¹ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ù†ØªÙŠØ¬Ø© Ø¥Ù„Ù‰ Telegram
        send_to_telegram(result)
        return jsonify({"status": "success", "result": result})

def send_to_telegram(result):
    """Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ù†ØªÙŠØ¬Ø© Ø¥Ù„Ù‰ Telegram"""
    url = f"https://api.telegram.org/bot{TELEGRAM_BOT_TOKEN}/sendMessage"
    data = {"chat_id": TELEGRAM_CHAT_ID, "text": f"ğŸ”¹ Ù†ØªÙŠØ¬Ø© Ø§Ù„ØªÙ†ÙÙŠØ°:\n{result}"}
    requests.post(url, data=data)

# ğŸ”¹ ØªØ´ØºÙŠÙ„ Flask ÙÙŠ Thread Ù…Ù†ÙØµÙ„
def run_flask():
    app.run(host="0.0.0.0", port=5000)

threading.Thread(target=run_flask, daemon=True).start()

# ğŸ”¹ ØªØ´ØºÙŠÙ„ Ngrok ÙˆØ±Ø¨Ø· Google Colab Ø¨Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª
public_url = ngrok.connect(5000).public_url
print(f"ğŸ”— Ø±Ø§Ø¨Ø· Webhook Ø§Ù„Ø¬Ø¯ÙŠØ¯: {public_url}/{TELEGRAM_BOT_TOKEN}")

# ğŸ”¹ ØªØ­Ø¯ÙŠØ« Webhook ÙÙŠ Telegram
telegram_url = f"https://api.telegram.org/bot{TELEGRAM_BOT_TOKEN}/setWebhook?url={public_url}/{TELEGRAM_BOT_TOKEN}"
requests.get(telegram_url)
print("âœ… Webhook Ù…ØªØµÙ„ Ø¨Ù€ Telegram Ø¨Ù†Ø¬Ø§Ø­!")

result = 5 + 10