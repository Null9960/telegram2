# -*- coding: utf-8 -*-
"""Untitled2.ipynb

Automatically generated by Colab.

Original file is located at
    https://colab.research.google.com/drive/1lKnrcIpLjHtpPGxtmcPw75JIURu7U-Ec
"""

!apt-get update && apt-get install -y python3-pip

!python3 -m pip install --upgrade pip setuptools wheel

!pip install --upgrade --force-reinstall ipython jedi

!pip uninstall -y ipython ipykernel jedi decorator prompt-toolkit pygments tornado traitlets typing-extensions matplotlib-inline pexpect wcwidth pyzmq
!pip cache purge

import os
os._exit(0)

!pip install --upgrade google-colab
!pip install ipython==7.34.0 ipykernel==6.17.1 jedi==0.18.1 decorator==4.4.2 prompt-toolkit==3.0.20 pygments==2.10 tornado==6.1 traitlets==5.1.1 typing-extensions==4.1.1 matplotlib-inline==0.1.3 pexpect==4.8.0 wcwidth==0.2.5 pyzmq==22.3.0

!apt-get update && apt-get install -y libzmq3-dev

!pip uninstall -y pyzmq
!pip install --no-cache-dir --force-reinstall pyzmq

!pip install --upgrade --force-reinstall --no-cache-dir notebook

!kill -9 -1

!pip install --upgrade google-colab
!pip install --upgrade pip
!pip install --upgrade ipython ipykernel notebook

!pip check

!pip uninstall -y torch torchvision torchaudio nvidia-cublas-cu12 nvidia-cuda-cupti-cu12 nvidia-cuda-nvrtc-cu12 nvidia-cuda-runtime-cu12 nvidia-cudnn-cu12 nvidia-cufft-cu12 nvidia-curand-cu12 nvidia-cusolver-cu12 nvidia-cusparse-cu12 nvidia-nvjitlink-cu12 jedi pycairo

!apt-get update && apt-get upgrade -y

import torch
print(f"âœ… Ø¥ØµØ¯Ø§Ø± Torch Ø§Ù„Ù…Ø«Ø¨Øª: {torch.__version__}")
print(f"ğŸ”¹ Ù‡Ù„ ÙŠÙˆØ¬Ø¯ GPU Ù…ØªØ§Ø­ØŸ {'Ù†Ø¹Ù…' if torch.cuda.is_available() else 'Ù„Ø§'}")
print(f"ğŸ”¹ Ø§Ø³Ù… ÙˆØ­Ø¯Ø© GPU Ø§Ù„Ù…ØªØ§Ø­Ø©: {torch.cuda.get_device_name(0) if torch.cuda.is_available() else 'âŒ Ù„Ø§ ÙŠÙˆØ¬Ø¯ GPU'}")

import os
import requests
import threading
import json
from flask import Flask, request, jsonify
from google.colab import drive
from pyngrok import ngrok

# âœ… **ØªØ­Ù…ÙŠÙ„ Google Drive**
drive.mount('/content/drive')

# ğŸ”¹ **Ø§Ù„Ù…Ø³Ø§Ø± Ø¥Ù„Ù‰ Ù…Ù„Ù Ø§Ù„ØªÙˆÙƒÙ†Ø§Øª ÙÙŠ Drive**
config_path = "/content/drive/MyDrive/telegram_config.txt"

# âœ… **ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØªÙˆÙƒÙ†Ø§Øª Ù…Ù† Google Drive**
def load_telegram_config(config_path):
    config = {}
    if os.path.exists(config_path):
        with open(config_path, "r") as file:
            for line in file:
                key, value = line.strip().split("=")
                config[key] = value
    return config

telegram_config = load_telegram_config(config_path)

# âœ… **Ø§Ø³ØªØ®Ø±Ø§Ø¬ Ø§Ù„Ù‚ÙŠÙ…**
TELEGRAM_BOT_TOKEN = telegram_config["TELEGRAM_BOT_TOKEN"]
TELEGRAM_CHAT_ID = telegram_config["TELEGRAM_CHAT_ID"]

print(f"âœ… ØªÙ… ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØªÙˆÙƒÙ† Ø¨Ù†Ø¬Ø§Ø­: {TELEGRAM_BOT_TOKEN[:10]}********")
print(f"âœ… ØªÙ… ØªØ­Ù…ÙŠÙ„ Ù…Ø¹Ø±Ù Ø§Ù„Ø´Ø§Øª: {TELEGRAM_CHAT_ID}")

# ğŸ”¹ **Ø¥Ø¹Ø¯Ø§Ø¯ Flask**
app = Flask(__name__)

@app.route(f"/{TELEGRAM_BOT_TOKEN}", methods=["POST"])
def receive_message():
    """Ø§Ø³ØªÙ‚Ø¨Ø§Ù„ Ø§Ù„Ø±Ø³Ø§Ø¦Ù„ Ù…Ù† Telegram"""
    data = request.json
    if "message" in data:
        message_text = data["message"]["text"]
        chat_id = data["message"]["chat"]["id"]

        # âœ… **Ø§Ù„ØªØ£ÙƒØ¯ Ø£Ù† Ø§Ù„Ø±Ø³Ø§Ù„Ø© ÙˆØ§Ø±Ø¯Ø© Ù…Ù† Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù„ØµØ­ÙŠØ­**
        if str(chat_id) != TELEGRAM_CHAT_ID:
            return jsonify({"status": "error", "message": "Unauthorized chat ID"}), 403

        # âœ… **ØªÙ†ÙÙŠØ° Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„Ù…Ø³ØªÙ„Ù…**
        try:
            exec_locals = {}
            exec(message_text, {}, exec_locals)
            result = exec_locals.get("result", "âœ… ØªÙ… ØªÙ†ÙÙŠØ° Ø§Ù„ÙƒÙˆØ¯ Ø¨Ù†Ø¬Ø§Ø­!")
        except Exception as e:
            result = f"âŒ Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ ØªÙ†ÙÙŠØ° Ø§Ù„ÙƒÙˆØ¯: {str(e)}"

        # âœ… **Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ù†ØªÙŠØ¬Ø© Ø¥Ù„Ù‰ Telegram**
        send_to_telegram(result)
        return jsonify({"status": "success", "result": result})

def send_to_telegram(result):
    """Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ù†ØªÙŠØ¬Ø© Ø¥Ù„Ù‰ Telegram"""
    url = f"https://api.telegram.org/bot{TELEGRAM_BOT_TOKEN}/sendMessage"
    data = {"chat_id": TELEGRAM_CHAT_ID, "text": f"ğŸ”¹ Ù†ØªÙŠØ¬Ø© Ø§Ù„ØªÙ†ÙÙŠØ°:\n{result}"}
    requests.post(url, data=data)

# âœ… **ØªØ´ØºÙŠÙ„ Flask ÙÙŠ Thread Ù…Ø³ØªÙ‚Ù„**
def run_flask():
    app.run(host="0.0.0.0", port=5000)

threading.Thread(target=run_flask, daemon=True).start()

# âœ… **ØªØ´ØºÙŠÙ„ Ngrok ÙˆØ±Ø¨Ø· Google Colab Ø¨Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª**
public_url = ngrok.connect(5000).public_url
print(f"ğŸ”— Ø±Ø§Ø¨Ø· Webhook Ø§Ù„Ø¬Ø¯ÙŠØ¯: {public_url}/{TELEGRAM_BOT_TOKEN}")

# âœ… **Ø¥Ø¹Ø¯Ø§Ø¯ Webhook ÙÙŠ Telegram**
telegram_url = f"https://api.telegram.org/bot{TELEGRAM_BOT_TOKEN}/setWebhook?url={public_url}/{TELEGRAM_BOT_TOKEN}"
requests.get(telegram_url)
print("âœ… Webhook Ù…ØªØµÙ„ Ø¨Ù€ Telegram Ø¨Ù†Ø¬Ø§Ø­!")

!pip install flask pyngrok requests

import os
import json
from flask import Flask, request
from google.colab import drive
from pyngrok import ngrok

# âœ… ØªØ­Ù…ÙŠÙ„ Google Drive
drive.mount('/content/drive')

# âœ… Ù‚Ø±Ø§Ø¡Ø© Ø§Ù„ØªÙˆÙƒÙ† Ù…Ù† Google Drive
TELEGRAM_CONFIG_PATH = "/content/drive/My Drive/telegram_config.txt"
if os.path.exists(TELEGRAM_CONFIG_PATH):
    with open(TELEGRAM_CONFIG_PATH, "r") as f:
        config = json.load(f)
        TELEGRAM_BOT_TOKEN = config["TELEGRAM_BOT_TOKEN"]
        TELEGRAM_CHAT_ID = config["TELEGRAM_CHAT_ID"]
else:
    raise FileNotFoundError("âŒ Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ù…Ù„Ù Ø§Ù„ØªÙˆÙƒÙ† ÙÙŠ Google Drive!")

# âœ… ØªØ´ØºÙŠÙ„ Flask
app = Flask(__name__)

@app.route(f'/{TELEGRAM_BOT_TOKEN}', methods=['POST'])
def webhook():
    update = request.get_json()
    print(f"ğŸ“© Ø§Ø³ØªÙ„Ø§Ù… Ø±Ø³Ø§Ù„Ø© Ø¬Ø¯ÙŠØ¯Ø© Ù…Ù† Telegram: {update}")
    return '', 200

# âœ… ØªØ´ØºÙŠÙ„ `ngrok` ÙˆØ±Ø¨Ø· Google Colab Ø¨Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª
public_url = ngrok.connect(5000).public_url
print(f"ğŸ”— Ø±Ø§Ø¨Ø· Webhook Ø§Ù„Ø¬Ø¯ÙŠØ¯: {public_url}/{TELEGRAM_BOT_TOKEN}")

# âœ… ØªØ´ØºÙŠÙ„ Ø§Ù„Ø®Ø§Ø¯Ù…
app.run(port=5000)

TELEGRAM_CONFIG_PATH = "/content/drive/My Drive/telegram_config.txt"

if os.path.exists(TELEGRAM_CONFIG_PATH):
    with open(TELEGRAM_CONFIG_PATH, "r") as f:
        content = f.read()
    print(f"ğŸ“‚ Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ù…Ù„Ù:\n{content}")
else:
    print("âŒ Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ù…Ù„Ù Ø§Ù„ØªÙˆÙƒÙ† ÙÙŠ Google Drive!")

TELEGRAM_CONFIG_PATH = "/content/drive/My Drive/telegram_config.txt"

if os.path.exists(TELEGRAM_CONFIG_PATH):
    with open(TELEGRAM_CONFIG_PATH, "r") as f:
        content = f.read()
    print(f"ğŸ“‚ Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ù…Ù„Ù:\n{content}")
else:
    print("âŒ Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ù…Ù„Ù Ø§Ù„ØªÙˆÙƒÙ† ÙÙŠ Google Drive!")

import os
import json

# âœ… Ù…Ø³Ø§Ø± Ù…Ù„Ù Ø§Ù„ØªÙˆÙƒÙ† ÙÙŠ Google Drive
TELEGRAM_CONFIG_PATH = "/content/drive/My Drive/telegram_config.txt"

# âœ… Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ÙˆØ¬ÙˆØ¯ Ø§Ù„Ù…Ù„Ù ÙˆØªØ­Ù…ÙŠÙ„ Ø§Ù„ØªÙˆÙƒÙ†
if os.path.exists(TELEGRAM_CONFIG_PATH):
    with open(TELEGRAM_CONFIG_PATH, "r") as f:
        config = json.load(f)

    TELEGRAM_BOT_TOKEN = config.get("TELEGRAM_BOT_TOKEN", "")
    TELEGRAM_CHAT_ID = config.get("TELEGRAM_CHAT_ID", "")

    if TELEGRAM_BOT_TOKEN and TELEGRAM_CHAT_ID:
        print(f"âœ… ØªÙ… ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØªÙˆÙƒÙ† Ø¨Ù†Ø¬Ø§Ø­: {TELEGRAM_BOT_TOKEN[:10]}********")
        print(f"âœ… ØªÙ… ØªØ­Ù…ÙŠÙ„ Ù…Ø¹Ø±Ù Ø§Ù„Ø´Ø§Øª: {TELEGRAM_CHAT_ID}")
    else:
        print("âš ï¸ ÙŠÙˆØ¬Ø¯ Ø®Ø·Ø£ ÙÙŠ Ù…Ù„Ù Ø§Ù„ØªÙˆÙƒÙ†ØŒ ØªØ£ÙƒØ¯ Ù…Ù† ØµØ­Ø© Ø§Ù„Ù…Ø­ØªÙˆÙ‰.")
else:
    print("âŒ Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ù…Ù„Ù Ø§Ù„ØªÙˆÙƒÙ† ÙÙŠ Google Drive!")

import requests

# âœ… Ø¥Ø±Ø³Ø§Ù„ Ø±Ø³Ø§Ù„Ø© Ø§Ø®ØªØ¨Ø§Ø± Ø¥Ù„Ù‰ Telegram
message = "ğŸš€ Ø§Ø®ØªØ¨Ø§Ø± Ù†Ø§Ø¬Ø­: ØªÙ… ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØªÙˆÙƒÙ† Ù…Ù† Google Drive Ø¨Ù†Ø¬Ø§Ø­!"
url = f"https://api.telegram.org/bot{TELEGRAM_BOT_TOKEN}/sendMessage"
params = {"chat_id": TELEGRAM_CHAT_ID, "text": message}

response = requests.get(url, params=params)
if response.status_code == 200:
    print("âœ… ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø±Ø³Ø§Ù„Ø© Ø¨Ù†Ø¬Ø§Ø­!")
else:
    print(f"âŒ ÙØ´Ù„ ÙÙŠ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø±Ø³Ø§Ù„Ø©! Ø±Ù…Ø² Ø§Ù„Ø®Ø·Ø£: {response.status_code}")

import requests

# âœ… Ø¥Ø±Ø³Ø§Ù„ Ø±Ø³Ø§Ù„Ø© Ø§Ø®ØªØ¨Ø§Ø± Ø¥Ù„Ù‰ Telegram
message = "ğŸš€ Ø§Ø®ØªØ¨Ø§Ø± Ù†Ø§Ø¬Ø­: ØªÙ… ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØªÙˆÙƒÙ† Ù…Ù† Google Drive Ø¨Ù†Ø¬Ø§Ø­!"
url = f"https://api.telegram.org/bot{TELEGRAM_BOT_TOKEN}/sendMessage"
params = {"chat_id": TELEGRAM_CHAT_ID, "text": message}

response = requests.get(url, params=params)
if response.status_code == 200:
    print("âœ… ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø±Ø³Ø§Ù„Ø© Ø¨Ù†Ø¬Ø§Ø­!")
else:
    print(f"âŒ ÙØ´Ù„ ÙÙŠ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø±Ø³Ø§Ù„Ø©! Ø±Ù…Ø² Ø§Ù„Ø®Ø·Ø£: {response.status_code}")

!ls /content/

import requests

TELEGRAM_BOT_TOKEN = "ØªÙˆÙƒÙ†_Ø§Ù„Ø¨ÙˆØª"
WEBHOOK_URL = f"https://api.telegram.org/bot{TELEGRAM_BOT_TOKEN}/getWebhookInfo"

response = requests.get(WEBHOOK_URL)
print(response.json())

requests.get(f"https://api.telegram.org/bot{TELEGRAM_BOT_TOKEN}/deleteWebhook")
requests.get(f"https://api.telegram.org/bot{TELEGRAM_BOT_TOKEN}/setWebhook?url={public_url}")

import requests

TELEGRAM_BOT_TOKEN = "ØªÙˆÙƒÙ†_Ø§Ù„Ø¨ÙˆØª_Ù‡Ù†Ø§"
response = requests.get(f"https://api.telegram.org/bot{TELEGRAM_BOT_TOKEN}/getMe")
print(response.json())

import os
import json

# ğŸ”¹ Ù…Ø³Ø§Ø± Ù…Ù„Ù Ø§Ù„ØªÙˆÙƒÙ† ÙÙŠ Google Drive
TELEGRAM_CONFIG_PATH = "/content/drive/My Drive/telegram_config.json"

# âœ… Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ÙˆØ¬ÙˆØ¯ Ø§Ù„Ù…Ù„Ù Ù‚Ø¨Ù„ ØªØ­Ù…ÙŠÙ„Ù‡
if os.path.exists(TELEGRAM_CONFIG_PATH):
    with open(TELEGRAM_CONFIG_PATH, "r") as f:
        config = json.load(f)
        TELEGRAM_BOT_TOKEN = config.get("TELEGRAM_BOT_TOKEN", "")
        TELEGRAM_CHAT_ID = config.get("TELEGRAM_CHAT_ID", "")

    if TELEGRAM_BOT_TOKEN and TELEGRAM_CHAT_ID:
        print(f"âœ… ØªÙ… ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØªÙˆÙƒÙ† Ø¨Ù†Ø¬Ø§Ø­: {TELEGRAM_BOT_TOKEN[:10]}********")
        print(f"âœ… ØªÙ… ØªØ­Ù…ÙŠÙ„ Ù…Ø¹Ø±Ù Ø§Ù„Ø´Ø§Øª: {TELEGRAM_CHAT_ID}")
    else:
        print("âŒ Ø®Ø·Ø£: Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø§Ù„Ù‚ÙŠÙ… Ø¯Ø§Ø®Ù„ JSONØŒ ØªØ­Ù‚Ù‚ Ù…Ù† ØµØ­Ø© Ø§Ù„Ù…Ù„Ù.")
else:
    print("âŒ Ø®Ø·Ø£: Ù…Ù„Ù Ø§Ù„ØªÙˆÙƒÙ† ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯ ÙÙŠ Google DriveØŒ ØªØ£ÙƒØ¯ Ù…Ù† Ø±ÙØ¹Ù‡.")

import os
import json
import subprocess
import requests
from flask import Flask, request, jsonify
from google.colab import drive
from pyngrok import ngrok

# âœ… **ØªØ­Ù…ÙŠÙ„ Google Drive**
drive.mount('/content/drive')

# âœ… **ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØªÙˆÙƒÙ†Ø§Øª Ù…Ù† Google Drive**
TELEGRAM_CONFIG_PATH = "/content/drive/My Drive/telegram_config.json"

if os.path.exists(TELEGRAM_CONFIG_PATH):
    with open(TELEGRAM_CONFIG_PATH, "r") as f:
        config = json.load(f)
        TELEGRAM_BOT_TOKEN = config["TELEGRAM_BOT_TOKEN"]
        TELEGRAM_CHAT_ID = config["TELEGRAM_CHAT_ID"]
else:
    raise FileNotFoundError("âŒ Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ù…Ù„Ù Ø§Ù„ØªÙˆÙƒÙ†Ø§Øª ÙÙŠ Google Drive!")

# âœ… **Ø¥Ø¹Ø¯Ø§Ø¯ Flask**
app = Flask(__name__)

# âœ… **ØªÙ†ÙÙŠØ° Ø§Ù„Ø£ÙˆØ§Ù…Ø± Ø§Ù„Ù…Ø³ØªÙ„Ù…Ø© Ù…Ù† Telegram**
@app.route(f"/{TELEGRAM_BOT_TOKEN}", methods=["POST"])
def handle_update():
    update = request.get_json()

    if "message" in update and "text" in update["message"]:
        chat_id = update["message"]["chat"]["id"]
        command = update["message"]["text"]

        # âœ… **ØªÙ†ÙÙŠØ° Ø§Ù„Ø£Ù…Ø± Ø§Ù„Ù…Ø±Ø³Ù„**
        try:
            result = subprocess.run(command, shell=True, capture_output=True, text=True)
            response = f"ğŸ“Œ **Ø§Ù„Ø£Ù…Ø±:**\n```{command}```\n\nâœ… **Ø§Ù„Ù†ØªÙŠØ¬Ø©:**\n```\n{result.stdout}\n```"
        except Exception as e:
            response = f"âŒ **Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ ØªÙ†ÙÙŠØ° Ø§Ù„Ø£Ù…Ø±:** {str(e)}"

        # âœ… **Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ù†ØªÙŠØ¬Ø© Ø¥Ù„Ù‰ Telegram**
        send_telegram_message(chat_id, response)

    return jsonify({"status": "success"})

# âœ… **Ø¥Ø±Ø³Ø§Ù„ Ø±Ø³Ø§Ù„Ø© Ø¥Ù„Ù‰ Telegram**
def send_telegram_message(chat_id, message):
    url = f"https://api.telegram.org/bot{TELEGRAM_BOT_TOKEN}/sendMessage"
    payload = {
        "chat_id": chat_id,
        "text": message,
        "parse_mode": "Markdown"
    }
    requests.post(url, json=payload)

# âœ… **ØªÙØ¹ÙŠÙ„ Ngrok ÙˆØ±Ø¨Ø· Webhook**
def start_ngrok():
    public_url = ngrok.connect(5000).public_url
    print(f"ğŸ”— Ø±Ø§Ø¨Ø· Webhook Ø§Ù„Ø¬Ø¯ÙŠØ¯: {public_url}/{TELEGRAM_BOT_TOKEN}")

    # âœ… **ØªØ­Ø¯ÙŠØ« Webhook ÙÙŠ Telegram**
    webhook_url = f"https://api.telegram.org/bot{TELEGRAM_BOT_TOKEN}/setWebhook?url={public_url}/{TELEGRAM_BOT_TOKEN}"
    response = requests.get(webhook_url)

    if response.status_code == 200:
        print("âœ… Webhook Ù…ØªØµÙ„ Ø¨Ù€ Telegram Ø¨Ù†Ø¬Ø§Ø­!")
    else:
        print(f"âŒ ÙØ´Ù„ ÙÙŠ Ø±Ø¨Ø· Webhook: {response.text}")

# âœ… **ØªØ´ØºÙŠÙ„ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚**
if __name__ == "__main__":
    start_ngrok()
    app.run(port=5000)

import os
import json
import requests
import subprocess
from flask import Flask, request, jsonify
from google.colab import drive
from pyngrok import ngrok

# âœ… **ØªØ­Ù…ÙŠÙ„ Google Drive**
drive.mount('/content/drive')

# âœ… **ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØªÙˆÙƒÙ†Ø§Øª Ù…Ù† Google Drive**
TELEGRAM_CONFIG_PATH = "/content/drive/My Drive/telegram_config.json"

if os.path.exists(TELEGRAM_CONFIG_PATH):
    with open(TELEGRAM_CONFIG_PATH, "r") as f:
        config = json.load(f)
        TELEGRAM_BOT_TOKEN = config["TELEGRAM_BOT_TOKEN"]
        TELEGRAM_CHAT_ID = config["TELEGRAM_CHAT_ID"]
else:
    raise FileNotFoundError("âŒ Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ù…Ù„Ù Ø§Ù„ØªÙˆÙƒÙ†Ø§Øª ÙÙŠ Google Drive!")

# âœ… **Ø¥Ø¹Ø¯Ø§Ø¯ Flask**
app = Flask(__name__)

# âœ… **ØªÙ†ÙÙŠØ° Ø§Ù„Ø£ÙˆØ§Ù…Ø± Ø§Ù„Ù…Ø³ØªÙ„Ù…Ø© Ù…Ù† Telegram**
@app.route(f"/{TELEGRAM_BOT_TOKEN}", methods=["POST"])
def handle_update():
    update = request.get_json()

    if "message" in update and "text" in update["message"]:
        chat_id = update["message"]["chat"]["id"]
        command = update["message"]["text"]

        # âœ… **ØªÙ†ÙÙŠØ° Ø§Ù„Ø£Ù…Ø± Ø§Ù„Ù…Ø±Ø³Ù„**
        try:
            result = subprocess.run(command, shell=True, capture_output=True, text=True)
            response = f"ğŸ“Œ **Ø§Ù„Ø£Ù…Ø±:**\n```{command}```\n\nâœ… **Ø§Ù„Ù†ØªÙŠØ¬Ø©:**\n```\n{result.stdout}\n```"
        except Exception as e:
            response = f"âŒ **Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ ØªÙ†ÙÙŠØ° Ø§Ù„Ø£Ù…Ø±:** {str(e)}"

        # âœ… **Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ù†ØªÙŠØ¬Ø© Ø¥Ù„Ù‰ Telegram**
        send_telegram_message(chat_id, response)

    return jsonify({"status": "success"})

# âœ… **Ø¥Ø±Ø³Ø§Ù„ Ø±Ø³Ø§Ù„Ø© Ø¥Ù„Ù‰ Telegram**
def send_telegram_message(chat_id, message):
    url = f"https://api.telegram.org/bot{TELEGRAM_BOT_TOKEN}/sendMessage"
    payload = {
        "chat_id": chat_id,
        "text": message,
        "parse_mode": "Markdown"
    }
    requests.post(url, json=payload)

# âœ… **ØªÙØ¹ÙŠÙ„ Ngrok ÙˆØ±Ø¨Ø· Webhook**
def start_ngrok():
    print("â³ Ø¬Ø§Ø±ÙŠ Ø¨Ø¯Ø¡ Ngrok...")
    NGROK_AUTH_TOKEN = "2u6BsGxIfgQPbF5wtOEO3aJEPf1_3DqKPAi4ZPnxuHkRSs2Sj"

    # âœ… **Ø¥Ø¹Ø¯Ø§Ø¯ Ngrok Authtoken**
    ngrok.set_auth_token(NGROK_AUTH_TOKEN)

    # âœ… **ÙØªØ­ Ù†ÙÙ‚ Ngrok**
    public_url = ngrok.connect(5000).public_url
    print(f"ğŸ”— Ø±Ø§Ø¨Ø· Webhook Ø§Ù„Ø¬Ø¯ÙŠØ¯: {public_url}/{TELEGRAM_BOT_TOKEN}")

    # âœ… **ØªØ­Ø¯ÙŠØ« Webhook ÙÙŠ Telegram**
    webhook_url = f"https://api.telegram.org/bot{TELEGRAM_BOT_TOKEN}/setWebhook?url={public_url}/{TELEGRAM_BOT_TOKEN}"
    response = requests.get(webhook_url)

    if response.status_code == 200:
        print("âœ… Webhook Ù…ØªØµÙ„ Ø¨Ù€ Telegram Ø¨Ù†Ø¬Ø§Ø­!")
    else:
        print(f"âŒ ÙØ´Ù„ ÙÙŠ Ø±Ø¨Ø· Webhook: {response.text}")

# âœ… **ØªØ´ØºÙŠÙ„ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚**
if __name__ == "__main__":
    start_ngrok()
    app.run(port=5000)